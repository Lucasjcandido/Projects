CREATE TABLE TB_CARRO (
  ID_CARRO INT NOT NULL,
  PESO_CARRO INT NOT NULL,
  COR_CARRO INT NOT NULL,
  ANO_CARRO DATE NOT NULL,
  TAMANHO_CARRO INT NOT NULL,
  KM_CARRO DECIMAL NOT NULL,
  TB_USUARIO_ID_USUARIO INT NOT NULL,
  TB_MODELO_ID_MODELO INT NOT NULL,
  TB_MARCA_ID_MARCA INT NOT NULL,
  PRIMARY KEY (ID_CARRO, TB_USUARIO_ID_USUARIO, TB_MARCA_ID_MARCA, TB_MODELO_ID_MODELO))
ENGINE = InnoDB;

CREATE TABLE TB_USUARIO (
  ID_USUARIO INT NOT NULL,
  CPF_USUARIO VARCHAR(45) NOT NULL,
  NOME` TEXT(70) NOT NULL,
  DATA_NASCIMENTO DATE NOT NULL,
  EMAIL_USUARIO VARCHAR(45) NOT NULL,
  TB_CARRO_ID_CARRO INT NOT NULL,
  PRIMARY KEY (ID_USUARIO, TB_CARRO_ID_CARRO),
  INDEX fk_TB_USUARIO_TB_CARRO_id (TB_CARRO_ID_CARRO ASC) VISIBLE,
  CONSTRAINT fk_TB_USUARIO_TB_CARRO
    FOREIGN KEY (TB_CARRO_ID_CARRO)
    REFERENCES TB_CARRO (ID_CARRO)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE TABLE TB_MARCA_CARRO (
  ID_MARCA INT NOT NULL,
  MARCA_CARRO TEXT(20) NOT NULL,
  TB_CARRO_ID_CARRO INT NOT NULL,
  TB_CARRO_TB_USUARIO_ID_USUARIO INT NOT NULL,
  PRIMARY KEY (ID_MARCA, TB_CARRO_ID_CARRO, TB_CARRO_TB_USUARIO_ID_USUARIO),
  INDEX fk_TB_MARCA_CARRO_TB_CARRO1_id (TB_CARRO_ID_CARRO ASC, TB_CARRO_TB_USUARIO_ID_USUARIO ASC) VISIBLE,
  CONSTRAINT fk_TB_MARCA_CARRO_TB_CARRO
    FOREIGN KEY (TB_CARRO_ID_CARRO , TB_CARRO_TB_USUARIO_ID_USUARIO)
    REFERENCES TB_CARRO (ID_CARRO , TB_USUARIO_ID_USUARIO)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE TABLE TB_MODELO_CARRO (
  ID_MODELO INT NOT NULL,
  CARROCERIA_CARRO TEXT(20) NOT NULL,
  TB_CARRO_ID_CARRO INT NOT NULL,
  TB_CARRO_TB_USUARIO_ID_USUARIO INT NOT NULL,
  PRIMARY KEY (ID_MODELO, TB_CARRO_ID_CARRO, TB_CARRO_TB_USUARIO_ID_USUARIO),
  INDEX fk_TB_MODELO_CARRO_TB_CARRO1_id (TB_CARRO_ID_CARRO ASC, TB_CARRO_TB_USUARIO_ID_USUARIO ASC) VISIBLE,
  CONSTRAINT fk_TB_MODELO_CARRO_TB_CARRO
    FOREIGN KEY (TB_CARRO_ID_CARRO , TB_CARRO_TB_USUARIO_ID_USUARIO)
    REFERENCES TB_CARRO (ID_CARRO , TB_USUARIO_ID_USUARIO)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;